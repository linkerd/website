commands:
- name: check
  description: Check the Linkerd installation for potential problems
  flags:
  - name: --expected-version
    arg: string
    description: Overrides the version used when checking if Linkerd is running the latest version (mostly for testing)
  - names: [--namespace,-n]
    arg: string
    description: Namespace to use for `--proxy` checks 
    default: all
  - name: --pre
    description: Only run pre-installation checks, to determine if the control plane can be installed
  - name: --proxy
    description: Only run data-plane checks, to determine if the data plane is healthy
  - name: --single-namespace
    description: When running pre-installation checks (`--pre`), only check the permissions required to operate the control plane in a single namespace
  - name: --wait
    arg: duration
    description: Retry and wait for some checks to succeed if they don't pass the first time
    default: 5m0s
- name: inject
  description: Add the Linkerd proxy to a Kubernetes config
  flags:
  - name: --api-port
    arg: uint
    description: Port where the Linkerd controller is running
    default: 8086
  - name: --control-port
    arg: uint
    description: Proxy port to use for control
    default: 4190
  - name: --disable-external-profiles
    description: Disables service profiles for non-Kubernetes services
  - name: --image-pull-policy
    arg: string
    description: Docker image pull policy
    default: IfNotPresent
  - name: --inbound-port
    arg: uint
    description: Proxy port to use for inbound traffic
    default: 4143
  - name: --init-image
    arg: string
    description: Linkerd init container image name
    default: gcr.io/linkerd-io/proxy-init
  - names: [--linkerd-version,-v]
    arg: string
    description: Tag to be used for Linkerd images
    default: stable-2.1.0
  - name: --metrics-port
    arg: uint
    description: Proxy port to serve metrics on
    default: 4191
  - name: --outbound-port
    arg: uint
    description: Proxy port to use for outbound traffic
    default: 4140
  - name: --proxy-bind-timeout
    arg: duration
    description: Timeout the proxy will us
    default: 10s
  - name: --proxy-cpu
    arg: float
    description: Amount of CPU units that the proxy sidecar requests
  - name: --proxy-image
    arg: string
    description: Linkerd proxy container image name
    default: gcr.io/linkerd-io/proxy
  - name: --proxy-log-level
    arg: string
    description: Log level for the proxy
    default: warn,linkerd2_proxy=info
  - name: --proxy-memory
    arg: uint
    description: Amount of Memory that the proxy sidecar requests
  - name: --proxy-uid
    arg: int
    description: Run the proxy under this user ID
    default: 2012
  - name: --registry
    arg: string
    description: Docker registry to pull images from
    default: gcr.io/linkerd-io
  - name: --skip-inbound-ports
    arg: uintSlice
    description: Ports that should skip the proxy and send directly to the application
    default: "[]"
  - name: --skip-outbound-ports
    arg: uintSlice
    description: Outbound ports that should skip the proxy
    default: "[]"
  - name: --tls
    arg: string
    description: |
      Enable TLS. Valid settings: `optional`.
flags:
- name: --api-addr
  arg: string
  description: Override kubeconfig and communicate directly with the control plane at host:port (mostly for testing)
- name: --context
  arg: string
  description: Name of the kubeconfig context to use
- names: [--linkerd-namespace,-l]
  arg: string
  description: The namespace in which Linkerd is installed
  env: LINKERD_NAMESPACE
  default: linkerd